!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){"use strict";var i="dnSlide",n="1.0.0";t[i]&&t[i].version>n||(t[i]=function(t,i){return this.container=t,this.options=i,this.api=["init","destroy","hide","show"],this.init(),this},t[i].version=n,t[i].defaults={isOddShow:!1,width:800,height:234,dnSlideFirstWidth:600,dnSlideFirstHeight:234,autoPlay:!1,delay:5e3,scale:.9,speed:500,verticalAlign:"middle",afterClickBtnFn:null},t[i].prototype={init:function(){var t=this;this.data(),this.settingDOM(),this.isIE7=/MSIE 6.0|MSIE 7.0/gi.test(window.navigator.userAgent),this.dnSlideItems=this.container.find("ul.dnSlide-list"),this.firstItem=this.container.find("ul.dnSlide-list > li:first-child"),this.dnSlideItemsLength=this.container.find("ul.dnSlide-list>li").length,this.dnSlideFirstItem=this.container.find("ul.dnSlide-list>li:first-child"),this.dnSlideLastItem=this.container.find("ul.dnSlide-list>li:last-child"),this.options.isOddShow&&this.isEvenPicNum(),this.prevBtn=this.container.find(".dnSlide-left-btn"),this.nextBtn=this.container.find(".dnSlide-right-btn"),this.prevBtn=this.container.find("div.dnSlide-left-btn"),this.nextBtn=this.container.find("div.dnSlide-right-btn"),this.rotateFlag=!0,this.countSettingValue(),this.setPositionValue(),this.prevBtn.off().on("click",function(i){i.stopPropagation();var n=t.options.afterClickPrevBtnFn;t.rotateFlag&&(t.rotateFlag=!1,t.dnSlideRotate("right")),"function"==typeof n&&n&&n()}),this.nextBtn.off().on("click",function(i){i.stopPropagation();var n=t.options.afterClickNextBtnFn;t.rotateFlag&&(t.rotateFlag=!1,t.dnSlideRotate("left")),"function"==typeof n&&n&&n()}),this.options.autoPlay&&(this.autoPlay(),this.container.hover(function(){clearTimeout(t.timer)},function(){t.autoPlay()}))},data:function(){this.container.data(i)||this.container.data(i,{target:this.container})},destroy:function(){this.container.empty().html(this.defalutHtml)},hide:function(t){this.container.addClass("dnSlide-hide"),t&&"function"==typeof t&&t()},show:function(t){this.container.removeClass("dnSlide-hide"),t&&"function"==typeof t&&t()},settingDOM:function(){var t=this;this.defalutHtml=this.container.html(),this.resourceSrcArr=this.container.find("img").map(function(t,i){return i.src});var i=this.container.html('<ul class="dnSlide-list"></ul>').find(".dnSlide-list");jQuery.each(this.resourceSrcArr,function(n,e){i.append('<li class="dnSlide-item"><a href="javascript:void(0)"><img src="'+t.resourceSrcArr[n]+'" width="100%"></a></li>')}),i.parents(".dnSlide-main").append("<div class='dnSlide-btn dnSlide-left-btn'></div>","<div class='dnSlide-btn dnSlide-right-btn'></div>")},getCustomSetting:function(){var t=this.setting;return t&&""!==t?t:{}},countSettingValue:function(){this.container.css({width:this.options.width,height:this.options.height}),this.firstItem.css({width:this.options.dnSlideFirstWidth,height:this.options.dnSlideFirstHeight}),this.prevBtn.css({width:(this.options.width-this.options.dnSlideFirstWidth)/2,height:this.options.height}),this.nextBtn.css({width:(this.options.width-this.options.dnSlideFirstWidth)/2,height:this.options.height}),this.dnSlideFirstItem.css({left:(this.options.width-this.options.dnSlideFirstWidth)/2,zIndex:Math.floor(this.dnSlideItemsLength/2)})},setPositionValue:function(){var i=this,n=Math.floor(this.dnSlideItemsLength/2),e=this.container.find(".dnSlide-list > li").slice(1),s=e.slice(0,e.length/2),d=e.slice(e.length/2),h=(this.options.width-this.options.dnSlideFirstWidth)/2,o=h/n,l=this.options.dnSlideFirstWidth,a=this.options.dnSlideFirstHeight;s.each(function(e,s){l*=i.options.scale,a*=i.options.scale;var d=e;t(s).css({width:l,height:a,zIndex:--n,opacity:1/++d,left:h+i.options.dnSlideFirstWidth+ ++e*o-l,top:i.settingVerticalAlign(a)})});var r=s.last().width(),c=s.last().height(),f=Math.floor(this.dnSlideItemsLength/2);d.each(function(e,s){t(s).css({width:r,height:c,zIndex:n++,opacity:1/f--,left:o*e,top:i.settingVerticalAlign(c)}),r/=i.options.scale,c/=i.options.scale})},settingVerticalAlign:function(t){var i=this.options.verticalAlign;return"middle"===i?(this.options.height-t)/2:"top"===i?0:"bottom"===i?this.options.height-t:(this.options.height-t)/2},dnSlideRotate:function(i){var n=this,e=[],s=[];"left"===i?(this.dnSlideItems.find("li").each(function(i,s){var d=t(s).prev().get(0)?t(s).prev():n.dnSlideLastItem,h=d.width(),o=d.height(),l=d.css("zIndex"),a=d.css("top"),r=d.css("left"),c=d.css("opacity");e.push(l),t(s).animate({width:h,height:o,top:a,left:r,opacity:c},n.options.speed,function(){n.rotateFlag=!0})}),this.dnSlideItems.find("li").each(function(i){t(this).css("zIndex",e[i]),s.push(parseInt(e[i]))})):"right"===i&&(this.dnSlideItems.find("li").each(function(i,s){var d=t(s).next().get(0)?t(s).next():n.dnSlideFirstItem,h=d.width(),o=d.height(),l=d.css("zIndex"),a=d.css("top"),r=d.css("left"),c=d.css("opacity");e.push(l),t(s).animate({width:h,height:o,top:a,left:r,opacity:c},function(){n.rotateFlag=!0})}),this.dnSlideItems.find("li").each(function(i){t(this).css("zIndex",e[i]),s.push(parseInt(e[i]))}));var d=Math.max.apply(null,s),h=jQuery.inArray(d,s);this.options.afterClickBtnFn.apply(this,[h])},autoPlay:function(){var t=this;this.timer=setInterval(function(){t.dnSlideRotate("left")},t.options.delay)},isEvenPicNum:function(){this.dnSlideItemsLength%2==0&&(this.dnSlideItems.append(this.dnSlideFirstItem.clone()),this.dnSlideItemsLength=this.dnSlide.find("ul.dnSlide-list>li").length,this.dnSlideFirstItem=this.dnSlide.find("ul.dnSlide-list>li:first-child"),this.dnSlideLastItem=this.dnSlide.find("ul.dnSlide-list>li:last-child"))},_api_:function(){var i=this,n={};return t.each(this.api,function(t){var e=this;n[e]=function(){var t=i[e].apply(i,arguments);return void 0===t?n:t}}),n}},t.fn[i]=function(n){return n=t.extend(!0,{},t[i].defaults,n),this.each(function(){t(this).data(i,new t[i](t(this),n)._api_()),t(this).addClass("done")})})});